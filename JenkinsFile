pipeline {
    agent any
    stages {
        stage('build') {
            steps {
                cmakeBuild buildDir: 'build', cleanBuild: true, installation: 'InSearchPath', label: 'build_C', sourceDir: 'CMakeLists.txt', steps: [[args: 'clean all'], [args: 'install', envVars: 'DESTDIR=${WORKSPACE}/path/to/dir']]
            }
        }
        stage ('test') {
            steps {
                echo 'testing'
            }
        }
       
    }
}

